(()=>{"use strict";var e='<div id="geoReviewBalloon" class="balloon">\n    <div class="balloon__title">Отзыв:</div>\n    <div class="balloon__row">\n      <input id="geoUserName" class="balloon__input" type="text" name="name" placeholder="Укажите ваше имя" value=\'\'>\n    </div>\n    <div class="balloon__row">\n      <input id="geoPlace" class="balloon__input" type="text" name="place" placeholder="Укажите место">\n    </div>\n    <div class="balloon__row">\n      <textarea id="geoReview" class="balloon__input balloon__input--textarea" name="review" placeholder="Оставить отзыв"></textarea>\n    </div>\n    <div class="balloon__row balloon__row--ctr">\n      <button id="geoReviewAdd" class="button">Добавить</button>\n    </div>\n  </div>';document.addEventListener("DOMContentLoaded",(function(){ymaps.ready((function(){var o=new ymaps.Map("map",{center:[55.749693,37.600925],zoom:16,controls:["zoomControl"],behaviors:["drag"]}),a=[],n=ymaps.templateLayoutFactory.createClass(e);o.events.add("click",(function(t){console.log("Click on map");var l=t.get("coords"),r=o.balloon;r.open(l,{contentBody:e}).then((function(){document.querySelector("#geoReviewAdd").addEventListener("click",(function(e){var t=function(e){if(e){var o=e.querySelector("#geoUserName").value.trim(),a=e.querySelector("#geoPlace").value.trim(),n=e.querySelector("#geoReview").value.trim();if(o&&a&&n)return{name:o,place:a,review:n}}}(document.querySelector("#geoReviewBalloon")),c=function(e){return"".concat(e.getDate().toString().padStart(2,0),".").concat(e.getMonth().toString().padStart(2,0),".").concat(e.getFullYear())}(new Date);if(c){var i={reviewDate:c,coord:l,userName:t.name,reviewPlace:[t.place],review:t.review};a.push(i);var d=new ymaps.Placemark(i.coord,{},{iconLayout:"default#image",balloonContentLayout:n});o.geoObjects.add(d),console.log("DATE",a)}r.close()}))}))})),o.geoObjects.events.add("click",(function(e){var o=e.get("target");o.events.add("balloonopen",(function(e){console.log("BALLON_OPEN",document.querySelector("#geoReviewBalloon"))})),console.log("PLACE_MARK_COORD",o.geometry.getCoordinates()),o.balloon.open(o.geometry.getCoordinates()).then((function(){var e,o;e=document.querySelector("#geoReviewBalloon"),o=a[0],e&&(console.log("reviewData",o),e.querySelector("#geoUserName").value=null==o?void 0:o.userName,e.querySelector("#geoPlace").value=null==o?void 0:o.reviewPlace[0],e.querySelector("#geoReview").value=null==o?void 0:o.review)}))}))}))}))})();